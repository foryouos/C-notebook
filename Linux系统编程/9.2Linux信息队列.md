# 消息队列
## 创建
```c
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
int msgget(key_t key, int msgflg);
msgget ：
//新创建的key可以使用IPC_PRIVATE,或者使用ftok创建
//msgflag ： IPC_PRIVATE
//返回
```
## 发送与接受

```c
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>
int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);
ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp,
              int msgflg);
//msgid ：消息队列的描述符
//msgp:指针指向用户定义的结构
struct msgbuf {
   long mtype;       /* message type, must be > 0 */
   char mtext[1];    /* message data */
};
//msgsz:发送消息的大小
//msgtyp:和发送消息的结构体内long mtype; 的mtype相同
//msgflg: 可填写默认，0
```




# 总结进程通信方式